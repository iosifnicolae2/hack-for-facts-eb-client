# Module 6: Commitment Control (ALOP)

## Module Overview

| Aspect | Details |
|--------|---------|
| **Duration** | 75-90 minutes |
| **Difficulty** | Intermediate |
| **Prerequisites** | [Module 5: Budget Approval & Authorization](./05-budget-approval.md) |
| **Next Module** | [Module 7: Cash & Payment Management](./07-cash-management.md) |

## Learning Objectives

By the end of this module, you will be able to:

- [ ] Execute the four ALOP phases correctly
- [ ] Process CFPP visa requests appropriately
- [ ] Maintain a compliant commitment register
- [ ] Identify when CFPP visa should be refused
- [ ] Document all expenditure phases properly

---

## Introduction

### The Four Phases of Every Payment

No public money leaves your institution without passing through four mandatory phases: Angajament (Commitment), Lichidare (Verification), Ordonanțare (Authorization), and Plată (Payment). This is the ALOP process mandated by OMFP 1792/2002.

> **Key Insight:** CFPP (Controlul Financiar Preventiv Propriu) visa is required at two critical points: commitment (when you sign contracts) and payment authorization (when you approve the payment order). The CFPP officer must be independent and cannot be pressured on visa decisions.

---

## Interactive Element 1: ALOP Phase Tracker

Track an expenditure through all four phases.

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       ALOP PHASE TRACKER                                │
│                       (OMFP 1792/2002)                                  │
│                                                                         │
│   Track your expenditure through the four mandatory phases             │
│                                                                         │
│   ═══════════════════════════════════════════════════════════════════  │
│                                                                         │
│   PHASE 1: ANGAJAMENT (Commitment)                                     │
│   ════════════════════════════════                                     │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │  STATUS: ✓ COMPLETE                                              │  │
│   │                                                                 │  │
│   │  What happens:                                                  │  │
│   │  • Legal obligation to pay is created                          │  │
│   │  • Contract/order/decision is signed                           │  │
│   │                                                                 │  │
│   │  Examples:                                                      │  │
│   │  • Contract signature                                          │  │
│   │  • Employment decision                                         │  │
│   │  • Grant award                                                 │  │
│   │                                                                 │  │
│   │  Requirements:                                                  │  │
│   │  ☑ Credit de angajament available                               │  │
│   │  ☑ CFPP visa obtained                                           │  │
│   │  ☑ Proper classification assigned                               │  │
│   │                                                                 │  │
│   │  Documents: Contract, procurement file, CFPP visa stamp        │  │
│   │                                                                 │  │
│   │  Date: 15.03.2025    Amount: 500,000 lei                        │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                              │                                          │
│                              ▼                                          │
│   ════════════════════════════════                                     │
│   PHASE 2: LICHIDARE (Verification)                                    │
│   ════════════════════════════════                                     │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │  STATUS: ✓ COMPLETE                                              │  │
│   │                                                                 │  │
│   │  What happens:                                                  │  │
│   │  • Delivery/service is verified                                │  │
│   │  • Goods received match contract specifications                │  │
│   │  • Invoice amount matches agreed terms                         │  │
│   │                                                                 │  │
│   │  Requirements:                                                  │  │
│   │  ☑ Goods/services delivered per contract                        │  │
│   │  ☑ Reception documents signed                                   │  │
│   │  ☑ Invoice received and verified                                │  │
│   │                                                                 │  │
│   │  Documents: Invoice, reception report, delivery confirmation   │  │
│   │                                                                 │  │
│   │  Date: 28.03.2025    Invoice: 485,000 lei (partial delivery)    │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                              │                                          │
│                              ▼                                          │
│   ════════════════════════════════                                     │
│   PHASE 3: ORDONANȚARE (Authorization)                                 │
│   ════════════════════════════════                                     │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │  STATUS: ⏳ IN PROGRESS                                          │  │
│   │                                                                 │  │
│   │  What happens:                                                  │  │
│   │  • Payment is authorized by ordonator                          │  │
│   │  • Complete documentation is verified                          │  │
│   │                                                                 │  │
│   │  Requirements:                                                  │  │
│   │  ☑ Credit bugetar available for this year                       │  │
│   │  ☑ All supporting documents present                             │  │
│   │  ☐ CFPP visa obtained (second visa point)                       │  │
│   │  ☐ Ordonator signature                                          │  │
│   │                                                                 │  │
│   │  Documents: Ordonanțare de plată, CFPP visa                     │  │
│   │                                                                 │  │
│   │  [Request CFPP Visa →]                                          │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                              │                                          │
│                              ▼                                          │
│   ════════════════════════════════                                     │
│   PHASE 4: PLATĂ (Payment)                                             │
│   ════════════════════════════════                                     │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │  STATUS: ○ PENDING                                               │  │
│   │                                                                 │  │
│   │  What happens:                                                  │  │
│   │  • Treasury processes payment order                            │  │
│   │  • Funds leave your account                                    │  │
│   │  • Payment confirmation received                               │  │
│   │                                                                 │  │
│   │  Requirements:                                                  │  │
│   │  ☐ Cash availability in treasury account                        │  │
│   │  ☐ Payment order submitted                                      │  │
│   │  ☐ Treasury processing                                          │  │
│   │                                                                 │  │
│   │  Documents: Payment order, bank confirmation                    │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   [View Timeline]  [Print Documentation Checklist]                     │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### Suggested Implementation

```typescript
interface ALOPPhase {
  phase: 'angajament' | 'lichidare' | 'ordonantare' | 'plata'
  status: 'pending' | 'in_progress' | 'complete' | 'blocked'
  description: string
  requirements: { text: string; complete: boolean }[]
  documents: string[]
  date?: string
  amount?: number
  cfppRequired: boolean
  cfppObtained?: boolean
}

interface ALOPTracker {
  expenditureId: string
  description: string
  phases: ALOPPhase[]
  currentPhase: number
  totalAmount: number
  blockedReason?: string
  advancePhase: () => boolean
  requestCFPP: () => void
}
```

---

## Interactive Element 2: CFPP Visa Simulator

Practice CFPP decision-making with real scenarios.

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      CFPP VISA SIMULATOR                                │
│                      (per OG 119/1999)                                  │
│                                                                         │
│   You are the CFPP officer. Review this request and decide.           │
│                                                                         │
│   ═══════════════════════════════════════════════════════════════════  │
│                                                                         │
│   SCENARIO 4 of 10                                                     │
│   ─────────────────                                                    │
│                                                                         │
│   Request Type: Contract Signature (Commitment Phase)                  │
│   Amount: 320,000 lei                                                  │
│   Classification: 65.02.04.01 / 20.01.03                               │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │  DOCUMENTS SUBMITTED:                                            │  │
│   │                                                                 │  │
│   │  ☑ Contract document                                            │  │
│   │  ☑ Procurement file with evaluation report                      │  │
│   │  ☑ Budget availability certificate                              │  │
│   │  ☐ Technical specifications document                            │  │
│   │  ☑ Legal basis reference                                        │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │  CFPP CHECKLIST:                                                 │  │
│   │                                                                 │  │
│   │  1. Legal basis           ✓ Legea 98/2016 applicable            │  │
│   │  2. Budget availability   ✓ 400,000 lei available at 20.01.03   │  │
│   │  3. Documentation         ⚠️ Missing technical specifications   │  │
│   │  4. Calculations          ✓ Amounts match procurement result    │  │
│   │  5. Classification        ✓ Correct functional/economic codes   │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   ═══════════════════════════════════════════════════════════════════  │
│                                                                         │
│   YOUR DECISION:                                                       │
│                                                                         │
│   ○ GRANT VISA                                                         │
│     The documentation is sufficient to proceed.                        │
│                                                                         │
│   ○ REQUEST ADDITIONAL INFORMATION                                     │
│     Documentation is incomplete but can be remedied.                   │
│                                                                         │
│   ● REFUSE VISA                                                        │
│     Significant deficiency prevents approval.                          │
│                                                                         │
│   If refusing, specify reason:                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ Missing technical specifications document required per          │  │
│   │ Art. 154, Legea 98/2016. Cannot verify contract terms          │  │
│   │ match procurement specifications.                               │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   [Submit Decision]                                                    │
│                                                                         │
│   ═══════════════════════════════════════════════════════════════════  │
│                                                                         │
│   RESULT: ✓ CORRECT                                                    │
│                                                                         │
│   Missing technical specifications is a valid reason for refusal.      │
│   The CFPP officer must verify that contract terms match what was     │
│   procured. Without specs, this cannot be confirmed.                   │
│                                                                         │
│   Legal basis for refusal: OG 119/1999, Art. 24                        │
│                                                                         │
│   [Next Scenario →]                                                    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### CFPP Decision Guide

| Check | What to Verify | Grounds for Refusal |
|-------|----------------|---------------------|
| Legal basis | Law/regulation authorizing expenditure | No legal basis found |
| Budget availability | Credits available at correct classification | Insufficient credits |
| Documentation | All required supporting docs present | Missing required documents |
| Calculations | Math correct, rates verified | Calculation errors |
| Classification | Correct functional/economic codes | Misclassification |

### Suggested Implementation

```typescript
interface CFPPScenario {
  id: number
  requestType: 'commitment' | 'payment'
  amount: number
  classification: string
  documentsSubmitted: { name: string; present: boolean }[]
  checklist: {
    item: string
    status: 'pass' | 'warning' | 'fail'
    note: string
  }[]
  correctDecision: 'grant' | 'request_info' | 'refuse'
  explanation: string
  legalBasis: string
}

interface CFPPSimulator {
  scenarios: CFPPScenario[]
  currentScenario: number
  submitDecision: (decision: string, reason?: string) => boolean
  getScore: () => { correct: number; total: number }
}
```

---

## Interactive Element 3: Commitment Register

Maintain a compliant commitment tracking system.

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      COMMITMENT REGISTER                                │
│                                                                         │
│   Track all legal commitments against available credit                 │
│                                                                         │
│   Year: 2025    Chapter: 65.02    Available Credit: 12,000,000 lei    │
│                                                                         │
│   ═══════════════════════════════════════════════════════════════════  │
│                                                                         │
│   COMMITMENTS REGISTERED                                               │
│   ──────────────────────                                               │
│                                                                         │
│   │ ID    │ Date       │ Description        │ Amount    │ Paid    │   │
│   ├───────┼────────────┼────────────────────┼───────────┼─────────┤   │
│   │ C-001 │ 15.01.2025 │ Utilities contract │ 1,200,000 │ 300,000 │   │
│   │ C-002 │ 22.01.2025 │ IT services        │   480,000 │ 120,000 │   │
│   │ C-003 │ 05.02.2025 │ Office supplies    │   150,000 │  75,000 │   │
│   │ C-004 │ 12.02.2025 │ Renovation Phase 1 │ 3,500,000 │       0 │   │
│   │ C-005 │ 28.02.2025 │ Training services  │   280,000 │       0 │   │
│   ├───────┴────────────┴────────────────────┼───────────┼─────────┤   │
│   │ TOTAL COMMITTED                         │ 5,610,000 │ 495,000 │   │
│   └─────────────────────────────────────────┴───────────┴─────────┘   │
│                                                                         │
│   ═══════════════════════════════════════════════════════════════════  │
│                                                                         │
│   CREDIT ANALYSIS                                                      │
│   ───────────────                                                      │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │                                                                 │  │
│   │  Available Credit de Angajament:  12,000,000 lei                │  │
│   │  Total Committed:                  5,610,000 lei                │  │
│   │  ─────────────────────────────────────────────                  │  │
│   │  Remaining for New Commitments:    6,390,000 lei                │  │
│   │                                                                 │  │
│   │  ████████████████████░░░░░░░░░░░░░░░░░░░░░░░  47% committed     │  │
│   │                                                                 │  │
│   │  ════════════════════════════════════════════════════════════  │  │
│   │                                                                 │  │
│   │  Credit Bugetar (2025):           12,000,000 lei                │  │
│   │  Payments Made YTD:                  495,000 lei                │  │
│   │  ─────────────────────────────────────────────                  │  │
│   │  Remaining for Payments:          11,505,000 lei                │  │
│   │                                                                 │  │
│   │  Outstanding Commitments:          5,115,000 lei                │  │
│   │  (Committed but not yet paid)                                   │  │
│   │                                                                 │  │
│   │  ⚠️ Ensure cash availability before year-end for outstanding    │  │
│   │     commitments.                                                │  │
│   │                                                                 │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   [+ Add New Commitment]  [Export Register]  [Monthly Reconciliation]  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### Suggested Implementation

```typescript
interface Commitment {
  id: string
  date: Date
  description: string
  amount: number
  paidToDate: number
  classification: string
  contractReference: string
  status: 'active' | 'completed' | 'cancelled'
  multiYear: boolean
  endDate?: Date
}

interface CommitmentRegister {
  year: number
  chapter: string
  availableCredit: number
  commitments: Commitment[]
  getTotalCommitted: () => number
  getRemainingForCommitment: () => number
  getOutstandingPayments: () => number
  addCommitment: (commitment: Commitment) => boolean
  recordPayment: (id: string, amount: number) => void
}
```

---

## Core Concepts

### ALOP Summary

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         ALOP PHASES                                     │
│                                                                         │
│   ANGAJAMENT ──► LICHIDARE ──► ORDONANȚARE ──► PLATĂ                   │
│       │              │              │              │                    │
│   ┌───┴───┐      ┌───┴───┐      ┌───┴───┐      ┌───┴───┐              │
│   │Create │      │Verify │      │Authorize│    │Execute│              │
│   │legal  │      │delivery│     │payment │      │payment│              │
│   │oblig. │      │       │      │order   │      │       │              │
│   └───┬───┘      └───┬───┘      └───┬───┘      └───┬───┘              │
│       │              │              │              │                    │
│   ┌───┴────────┐ ┌───┴────────┐ ┌───┴────────┐ ┌───┴────────┐         │
│   │ CFPP VISA  │ │ Reception  │ │ CFPP VISA  │ │ Treasury   │         │
│   │ REQUIRED   │ │ documents  │ │ REQUIRED   │ │ processing │         │
│   └────────────┘ └────────────┘ └────────────┘ └────────────┘         │
│                                                                         │
│   Key: CFPP visa is required at phases 1 (Angajament) and             │
│        3 (Ordonanțare). Not at Lichidare or Plată.                     │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### CFPP Independence

The CFPP officer (persoana desemnată pentru exercitarea CFPP) must be:

- **Independent**: Cannot be pressured on visa decisions
- **Qualified**: Must have financial/accounting background
- **Documented**: All decisions must be in writing
- **Protected**: Cannot be sanctioned for legitimate refusals

---

## Knowledge Check

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         KNOWLEDGE CHECK                                 │
│                                                                         │
│   Question 1 of 4                                                       │
│   ───────────────                                                       │
│                                                                         │
│   At which ALOP phases is CFPP visa required?                          │
│                                                                         │
│   ○ A) Angajament and Lichidare                                        │
│   ○ B) Lichidare and Plată                                             │
│   ○ C) Angajament and Ordonanțare                                      │
│   ○ D) All four phases                                                 │
│                                                                         │
│   [Submit Answer]                                                       │
│                                                                         │
│   ─────────────────────────────────────────────────────────────────    │
│                                                                         │
│   Question 2 of 4                                                       │
│   ───────────────                                                       │
│                                                                         │
│   The "Lichidare" phase involves:                                      │
│                                                                         │
│   ○ A) Signing the contract                                            │
│   ○ B) Verifying delivery matches contract terms                       │
│   ○ C) Authorizing the payment order                                   │
│   ○ D) Executing the bank transfer                                     │
│                                                                         │
│   [Submit Answer]                                                       │
│                                                                         │
│   ─────────────────────────────────────────────────────────────────    │
│                                                                         │
│   Question 3 of 4                                                       │
│   ───────────────                                                       │
│                                                                         │
│   Which of the following is a valid reason for CFPP visa refusal?      │
│                                                                         │
│   ○ A) The ordonator requested approval                                │
│   ○ B) Insufficient budget credits available                           │
│   ○ C) The supplier is a new contractor                                │
│   ○ D) The payment is for a small amount                               │
│                                                                         │
│   [Submit Answer]                                                       │
│                                                                         │
│   ─────────────────────────────────────────────────────────────────    │
│                                                                         │
│   Question 4 of 4                                                       │
│   ───────────────                                                       │
│                                                                         │
│   CFPP is governed by:                                                 │
│                                                                         │
│   ○ A) OUG 119/1999                                                    │
│   ○ B) OG 119/1999                                                     │
│   ○ C) Legea 500/2002                                                  │
│   ○ D) OMFP 1792/2002                                                  │
│                                                                         │
│   [Submit Answer]                                                       │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

**Answers:** 1-C, 2-B, 3-B, 4-B

---

## Key Takeaways

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          KEY TAKEAWAYS                                  │
│                                                                         │
│   ✓ ALOP is mandatory: Angajament → Lichidare → Ordonanțare → Plată   │
│                                                                         │
│   ✓ CFPP visa is required at commitment (signing) and payment         │
│     authorization (ordonanțare) — not at lichidare or plată           │
│                                                                         │
│   ✓ CFPP officer must be independent—cannot be pressured on visa      │
│     decisions; legitimate refusals are protected                       │
│                                                                         │
│   ✓ Track all commitments in a register to prevent overcommitment     │
│                                                                         │
│   ✓ CFPP is governed by OG 119/1999 (not OUG)                         │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## Call to Action

### Next Steps

- [ ] Review your institution's CFPP procedures
- [ ] Practice with the CFPP Visa Simulator (all 10 scenarios)
- [ ] Verify your commitment register is up to date
- [ ] Ensure CFPP officer independence is properly documented
- [ ] Proceed to [Module 7: Cash & Payment Management](./07-cash-management.md)

---

## Module Navigation

| Previous | Current | Next |
|----------|---------|------|
| [Module 5: Budget Approval](./05-budget-approval.md) | Module 6: Commitment Control | [Module 7: Cash Management](./07-cash-management.md) |

---

## Technical Notes

### Components Needed

- `ALOPPhaseTracker` — Four-phase progress tracker
- `CFPPSimulator` — Decision-making practice tool
- `CommitmentRegister` — Commitment tracking system
- `DocumentationChecklist` — Required documents by phase

### Data Requirements

- Commitment data by entity
- CFPP decision templates
- Documentation requirements by transaction type

### API Endpoints

- `GET /api/entities/{cui}/commitments`
- `POST /api/commitments`
- `PUT /api/commitments/{id}/payment`

### Accessibility

- Phase tracker with keyboard navigation
- Screen reader support for checklists
- High contrast status indicators
