---
session_id: "913e75f8-5dcd-44a2-9fdf-c9f781c94bbb"
session_id_source: "provided"
created: "2026-01-11T15:39:11Z"
updated: "2026-01-11T17:06:38Z"
status: "active"
commit: ""
topic: ""
tags: []
project_dir: "/Users/claudiuconstantinbogdan/projects/devostack/hack-for-facts-eb-client"
cwd: "/Users/claudiuconstantinbogdan/projects/devostack/hack-for-facts-eb-client"
---

# Session Decisions: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb

## Decisions

### PROMPT: User input
**Time**: 2026-01-11T15:39:11Z
**Source**: UserPromptSubmit
**Score**: 1
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T153911Z-UserPrompt-57988

/deep-questions /deep-research I need to figure out why the new ssr app is lagging on the initla load. The prev code load much faster. Before starting a deep research on the tools or tankstack start, let's clarify the research scope and pin point some problems first. ~/Downloads/dev.transparenta.eu.har ~/Downloads/transparenta.eu.har

---

### USER: SSR Setup
**Time**: 2026-01-11T15:41:15Z
**Source**: AskUserQuestion
**Score**: 5
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T154115Z-AskUserQuestion-67250-q1
**Context**: SSR Setup
**Multi-select**: false

**Question**: What SSR framework/approach are you using for dev.transparenta.eu?

**Options**:
1. **TanStack Start** - TanStack's new SSR/full-stack framework
2. **Vite SSR Plugin** - Custom Vite SSR setup or plugin
3. **Vinxi/Solid Start** - Vinxi-based SSR bundler
4. **React Router v7/Remix** - Using RR7 framework mode or Remix

**Selected**: TanStack Start

---

### USER: Main Issue
**Time**: 2026-01-11T15:41:15Z
**Source**: AskUserQuestion
**Score**: 5
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T154115Z-AskUserQuestion-67250-q2
**Context**: Main Issue
**Multi-select**: false

**Question**: Which aspect of the slow load is most problematic for your users?

**Options**:
1. **Time to First Byte (TTFB)** - 284ms server wait - users see blank page too long
2. **Time to Interactive (TTI)** - Page renders but feels slow to respond
3. **Layout shift / FOUC** - Content jumps around or styles flash
4. **All of the above** - General sluggishness across all metrics

**Selected**: All of the above

---

### USER: Prod Setup
**Time**: 2026-01-11T15:41:15Z
**Source**: AskUserQuestion
**Score**: 5
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T154115Z-AskUserQuestion-67250-q3
**Context**: Prod Setup
**Multi-select**: false

**Question**: Is the prod site (transparenta.eu) a pure SPA with client-side rendering only?

**Options**:
1. **Yes - pure SPA** - Standard Vite build with client-only rendering
2. **No - also has SSR** - Prod also does server-side rendering
3. **Static/pre-rendered** - Prod uses static site generation (SSG)

**Selected**: Yes - pure SPA

---

### USER: Caching
**Time**: 2026-01-11T15:41:15Z
**Source**: AskUserQuestion
**Score**: 5
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T154115Z-AskUserQuestion-67250-q4
**Context**: Caching
**Multi-select**: false

**Question**: Have you enabled caching for SSR pages on Vercel?

**Options**:
1. **No caching configured** - Each request triggers a fresh SSR render
2. **ISR enabled** - Incremental Static Regeneration is configured
3. **Edge caching** - Using Vercel Edge or CDN caching
4. **Not sure** - Need to check the Vercel/deployment config

**Selected**: No caching configured

---

### USER: Data Loading
**Time**: 2026-01-11T15:47:01Z
**Source**: AskUserQuestion
**Score**: 5
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T154701Z-AskUserQuestion-94794-q1
**Context**: Data Loading
**Multi-select**: false

**Question**: What data fetching happens during the initial page load (homepage)?

**Options**:
1. **No data fetching** - Homepage is static, no API calls during SSR
2. **API calls in loaders** - Route loaders fetch data server-side
3. **useQuery on mount** - Data fetched client-side after hydration
4. **Both loader + client** - Some SSR + additional client fetches

**Selected**: No data fetching

---

### USER: SSR Goal
**Time**: 2026-01-11T15:47:01Z
**Source**: AskUserQuestion
**Score**: 5
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T154701Z-AskUserQuestion-94794-q2
**Context**: SSR Goal
**Multi-select**: false

**Question**: What's your primary goal for the SSR migration?

**Options**:
1. **SEO / Crawlability** - Better search engine indexing
2. **Perceived performance** - Faster time to first paint
3. **Social sharing / OG** - Dynamic meta tags for link previews
4. **All of the above** - Full SSR benefits

**Selected**: All of the above

---

### USER: Trade-offs
**Time**: 2026-01-11T15:47:01Z
**Source**: AskUserQuestion
**Score**: 5
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T154701Z-AskUserQuestion-94794-q3
**Context**: Trade-offs
**Multi-select**: false

**Question**: Are you willing to trade some features for faster initial load?

**Options**:
1. **Yes - defer non-critical JS** - Lazy-load Sentry, PostHog, animations, etc.
2. **No - need all features immediately** - Everything must load upfront
3. **Unsure - need guidance** - Help me understand the trade-offs

**Selected**: Yes - defer non-critical JS

---

### USER: Research Focus
**Time**: 2026-01-11T15:48:56Z
**Source**: AskUserQuestion
**Score**: 5
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T154856Z-AskUserQuestion-3775-q1
**Context**: Research Focus
**Multi-select**: false

**Question**: Which research direction would be most valuable to pursue first?

**Options**:
1. **TanStack Start caching/ISR (Recommended)** - How to enable Vercel ISR or edge caching for SSR pages with TanStack Start
2. **SSR streaming setup** - Enable renderToPipeableStream for progressive HTML delivery
3. **Bundle optimization** - Code-splitting, lazy hydration, defer non-critical scripts
4. **Compare all approaches** - Comprehensive research on all optimization strategies

**Selected**: Compare all approaches

---

### USER: Target
**Time**: 2026-01-11T15:48:56Z
**Source**: AskUserQuestion
**Score**: 5
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T154856Z-AskUserQuestion-3775-q2
**Context**: Target
**Multi-select**: false

**Question**: Do you have a performance budget or target metric?

**Options**:
1. **Match SPA performance** - ~400ms Load time, ~280ms DOMContentLoaded
2. **Sub-second interactive** - TTI under 1000ms is acceptable
3. **Lighthouse score target** - Performance score 90+ on mobile
4. **No specific target** - Just want it to feel snappy

**Selected**: Match SPA performance

---

### PROMPT: User input
**Time**: 2026-01-11T15:50:01Z
**Source**: UserPromptSubmit
**Score**: 1
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T155001Z-UserPrompt-8701

Use 2026 documentation only, the latest available always.

---

### PROMPT: User input
**Time**: 2026-01-11T16:51:22Z
**Source**: UserPromptSubmit
**Score**: 1
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T165122Z-UserPrompt-74670

You can export

---

### PROMPT: User input
**Time**: 2026-01-11T16:56:30Z
**Source**: UserPromptSubmit
**Score**: 1
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T165630Z-UserPrompt-97507

Yes, please

---

### IMPL: Initial task breakdown
**Time**: 2026-01-11T16:56:38Z
**Source**: TodoWrite
**Score**: 3
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T165638Z-TodoWrite-98107-tasks
**Tasks**: 6 (0 done, 1 active, 5 pending)

- [~] Add Cache-Control headers to __root.tsx
- [ ] Add Cache-Control headers to index route (homepage)
- [ ] Add Cache-Control headers to other key routes
- [ ] Enable autoCodeSplitting in router plugin
- [ ] Evaluate routes for ssr: 'data-only' optimization
- [ ] Run typecheck to verify changes

---

### IMPL: Tasks restructured
**Time**: 2026-01-11T17:06:38Z
**Source**: TodoWrite
**Score**: 3
**Decision ID**: 913e75f8-5dcd-44a2-9fdf-c9f781c94bbb-20260111T170638Z-TodoWrite-43197-tasks
**Tasks**: 5 (5 done, 0 active, 0 pending)

- [x] Add Cache-Control headers to __root.tsx
- [x] Add Cache-Control headers to index route (homepage)
- [x] Add Cache-Control headers to other key routes
- [x] Enable autoCodeSplitting in router plugin
- [x] Run typecheck to verify changes

---

