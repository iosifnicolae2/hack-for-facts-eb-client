{
  "$schema": "https://opencode.ai/config.json",
  // Theme
  "theme": "opencode",
  // Auto-update OpenCode
  "autoupdate": true,
  // ============================================================================
  // INSTRUCTIONS - Project documentation loaded into context
  // ============================================================================
  "instructions": [
    "AGENTS.md",
    "prompts/ask-user.md"
  ],
  // ============================================================================
  // TUI CONFIGURATION
  // ============================================================================
  "tui": {
    "scroll_speed": 2,
    "scroll_acceleration": {
      "enabled": false
    }
  },
  // ============================================================================
  // FORMATTER CONFIGURATION - Use Prettier for code formatting
  // ============================================================================
  "formatter": {
    "prettier": {
      "command": [
        "yarn",
        "exec",
        "prettier",
        "--write",
        "$FILE"
      ],
      "extensions": [
        ".ts",
        ".tsx",
        ".js",
        ".jsx",
        ".json",
        ".md",
        ".yaml",
        ".yml",
        ".css"
      ]
    }
  },
  // ============================================================================
  // GLOBAL TOOL CONFIGURATION
  // ============================================================================
  "tools": {
    "read": true,
    "write": true,
    "edit": true,
    "bash": true,
    "grep": true,
    "glob": true,
    "list": true,
    "webfetch": true,
    "todowrite": true,
    "todoread": true,
    "ask_user": true
  },
  // ============================================================================
  // GLOBAL PERMISSIONS
  // ============================================================================
  "permission": {
    "edit": "allow",
    "webfetch": "allow",
    "external_directory": "ask",
    "doom_loop": "ask",
    "bash": {
      // ─────────────────────────────────────────────────────────────────────
      // Security - Block access to .env files (contains secrets)
      // ─────────────────────────────────────────────────────────────────────
      "cat *.env*": "deny",
      "cat .env*": "deny",
      "cat */.env*": "deny",
      "head *.env*": "deny",
      "head .env*": "deny",
      "head */.env*": "deny",
      "tail *.env*": "deny",
      "tail .env*": "deny",
      "tail */.env*": "deny",
      "less *.env*": "deny",
      "less .env*": "deny",
      "more *.env*": "deny",
      "more .env*": "deny",
      // ─────────────────────────────────────────────────────────────────────
      // Git - Read operations (always allow)
      // ─────────────────────────────────────────────────────────────────────
      "git status": "allow",
      "git diff*": "allow",
      "git log*": "allow",
      "git branch*": "allow",
      "git show*": "allow",
      "git blame*": "allow",
      // ─────────────────────────────────────────────────────────────────────
      // File inspection (always allow)
      // ─────────────────────────────────────────────────────────────────────
      "ls *": "allow",
      "cat *": "allow",
      "head *": "allow",
      "tail *": "allow",
      "grep *": "allow",
      "rg *": "allow",
      "find *": "allow",
      "pwd": "allow",
      "echo *": "allow",
      "which *": "allow",
      "wc *": "allow",
      // ─────────────────────────────────────────────────────────────────────
      // yarn - Project package manager (primary)
      // ─────────────────────────────────────────────────────────────────────
      "yarn *": "allow",
      "yarn dev*": "allow",
      "yarn build*": "allow",
      "yarn test*": "allow",
      "yarn typecheck*": "allow",
      "yarn lint*": "allow",
      "yarn i18n:*": "allow",
      "yarn add*": "allow",
      "yarn remove*": "allow",
      // ─────────────────────────────────────────────────────────────────────
      // npm/pnpm - Fallback package managers
      // ─────────────────────────────────────────────────────────────────────
      "npm run *": "allow",
      "npm test*": "allow",
      "npm install*": "allow",
      "pnpm *": "allow",
      // ─────────────────────────────────────────────────────────────────────
      // Vite / Playwright
      // ─────────────────────────────────────────────────────────────────────
      "npx vite*": "allow",
      "npx playwright*": "allow",
      "npx tsc*": "allow",
      // ─────────────────────────────────────────────────────────────────────
      // Docker - Container operations
      // ─────────────────────────────────────────────────────────────────────
      "docker build*": "allow",
      "docker run*": "allow",
      "docker compose*": "allow",
      "docker logs*": "allow",
      "docker ps*": "allow",
      // ─────────────────────────────────────────────────────────────────────
      // Potentially destructive - ask first
      // ─────────────────────────────────────────────────────────────────────
      "git push*": "ask",
      "git commit*": "ask",
      "git merge*": "ask",
      "git rebase*": "ask",
      "git reset*": "ask",
      "git checkout*": "ask",
      "git stash*": "ask",
      "rm *": "ask",
      "mv *": "ask",
      "cp *": "ask",
      "chmod *": "ask",
      "chown *": "ask",
      "sudo *": "ask",
      "npm publish*": "ask",
      "docker push*": "ask",
      // Default for everything else
      "*": "ask"
    }
  },
  // ============================================================================
  // CUSTOM COMMANDS - Quick access to common workflows
  // ============================================================================
  "command": {
    "test": {
      "template": "Run the test suite with `yarn test`. If there are failures, analyze them and suggest fixes. Focus on the failing tests first.",
      "description": "Run all tests and analyze failures",
      "agent": "build"
    },
    "test-e2e": {
      "template": "Run E2E tests with `yarn test:e2e`. Analyze any failures and suggest fixes based on the test patterns in e2e/.",
      "description": "Run Playwright E2E tests",
      "agent": "build"
    },
    "typecheck": {
      "template": "Run `yarn typecheck` to check for TypeScript errors. Analyze and fix any type errors found.",
      "description": "Run TypeScript type checking",
      "agent": "build"
    },
    "build": {
      "template": "Run `yarn build` to build for production. Report any failures and help fix them.",
      "description": "Run production build",
      "agent": "build"
    },
    "i18n": {
      "template": "Run `yarn i18n:extract` to extract translation strings, then check the .po files in src/locales/ for any missing translations.",
      "description": "Extract and check i18n translations",
      "agent": "build"
    },
    "review": {
      "template": "Review the recent changes using `git diff`. Focus on:\n1. React best practices and component patterns\n2. TypeScript type safety\n3. Security vulnerabilities (XSS, etc.)\n4. Performance implications (unnecessary re-renders)\n5. Accessibility compliance\n6. i18n coverage",
      "description": "Review recent code changes",
      "agent": "review-max"
    }
  },
  // ============================================================================
  // AGENT CONFIGURATION
  // Tab cycle: build-max -> build -> build-fast -> plan-max -> architect-max -> review-max -> implement-max
  // ============================================================================
  "agent": {
    // ─────────────────────────────────────────────────────────────────────────
    // PRIMARY AGENTS (Tab to switch)
    // ─────────────────────────────────────────────────────────────────────────
    // BUILD-MAX - Maximum reasoning for hardest implementation problems (128K thinking)
    "build-max": {
      "description": "Maximum reasoning (128K) - for hardest implementation problems",
      "mode": "primary",
      "model": "anthropic/opus-max",
      "temperature": 0.1,
      "maxSteps": 75,
      "prompt": "{file:prompts/build.md}",
      "tools": {
        "read": true,
        "write": true,
        "edit": true,
        "bash": true,
        "grep": true,
        "glob": true,
        "list": true,
        "webfetch": true,
        "todowrite": true,
        "todoread": true,
        "ask_user": true
      },
      "permission": {
        "edit": "allow",
        "bash": {
          "yarn *": "allow",
          "git status": "allow",
          "git diff*": "allow",
          "git log*": "allow",
          "*": "ask"
        }
      }
    },
    // BUILD - Standard development with deep reasoning (64K thinking)
    "build": {
      "description": "Standard development (64K thinking) - balanced speed and reasoning",
      "mode": "primary",
      "model": "openai/gpt-5.2-codex",
      "temperature": 0.1,
      "maxSteps": 50,
      "prompt": "{file:prompts/build.md}",
      "tools": {
        "read": true,
        "write": true,
        "edit": true,
        "bash": true,
        "grep": true,
        "glob": true,
        "list": true,
        "webfetch": true,
        "todowrite": true,
        "todoread": true,
        "ask_user": true
      },
      "permission": {
        "edit": "allow",
        "bash": {
          "yarn *": "allow",
          "git status": "allow",
          "git diff*": "allow",
          "git log*": "allow",
          "*": "ask"
        }
      }
    },
    // BUILD-FAST - Quick iterations without extended thinking
    "build-fast": {
      "description": "Fast development - quick iterations",
      "mode": "primary",
      "model": "google/gemini-3-flash-preview",
      "temperature": 0.1,
      "maxSteps": 50,
      "prompt": "{file:prompts/build.md}",
      "tools": {
        "read": true,
        "write": true,
        "edit": true,
        "bash": true,
        "grep": true,
        "glob": true,
        "list": true,
        "webfetch": true,
        "todowrite": true,
        "todoread": true,
        "ask_user": true
      },
      "permission": {
        "edit": "allow",
        "bash": {
          "yarn *": "allow",
          "git status": "allow",
          "git diff*": "allow",
          "git log*": "allow",
          "*": "ask"
        }
      }
    },
    // PLAN-MAX - Deep analysis and planning (128K thinking)
    "plan-max": {
      "description": "Deep planning (128K thinking) - thorough analysis and design",
      "mode": "primary",
      "model": "anthropic/opus-max",
      "temperature": 0.2,
      "maxSteps": 40,
      "prompt": "{file:prompts/plan.md}",
      "tools": {
        "read": true,
        "write": false,
        "edit": false,
        "bash": false,
        "grep": true,
        "glob": true,
        "list": true,
        "webfetch": true,
        "todowrite": true,
        "todoread": true,
        "ask_user": true
      },
      "permission": {
        "edit": "deny",
        "bash": "deny"
      }
    },
    // ARCHITECT-MAX - System design decisions (128K thinking)
    "architect-max": {
      "description": "System architecture (128K thinking) - design decisions and documentation",
      "mode": "primary",
      "model": "anthropic/opus-max",
      "temperature": 0.3,
      "maxSteps": 50,
      "prompt": "{file:prompts/architect.md}",
      "tools": {
        "read": true,
        "write": true,
        "edit": true,
        "bash": true,
        "grep": true,
        "glob": true,
        "list": true,
        "webfetch": true,
        "todowrite": true,
        "todoread": true,
        "ask_user": true
      },
      "permission": {
        "edit": "ask",
        "bash": "ask"
      }
    },
    // REVIEW-MAX - Thorough code review (128K thinking)
    "review-max": {
      "description": "Code review (128K thinking) - security, performance, React best practices",
      "mode": "primary",
      "model": "anthropic/opus-max",
      "temperature": 0.1,
      "maxSteps": 40,
      "prompt": "{file:prompts/reviewer.md}",
      "tools": {
        "read": true,
        "write": false,
        "edit": false,
        "bash": true,
        "grep": true,
        "glob": true,
        "list": true,
        "webfetch": true,
        "todowrite": true,
        "todoread": true,
        "ask_user": true
      },
      "permission": {
        "edit": "deny",
        "bash": {
          "git diff*": "allow",
          "git log*": "allow",
          "git show*": "allow",
          "yarn typecheck*": "allow",
          "yarn test*": "allow",
          "yarn lint*": "allow",
          "*": "deny"
        }
      }
    },
    // IMPLEMENT-MAX - Post-review/debug implementation (128K thinking)
    "implement-max": {
      "description": "Implementation (128K thinking) - targeted fixes after review/debug",
      "mode": "primary",
      "model": "anthropic/opus-max",
      "temperature": 0.1,
      "maxSteps": 75,
      "prompt": "{file:prompts/implement.md}",
      "tools": {
        "read": true,
        "write": true,
        "edit": true,
        "bash": true,
        "grep": true,
        "glob": true,
        "list": true,
        "webfetch": true,
        "todowrite": true,
        "todoread": true,
        "ask_user": true
      },
      "permission": {
        "edit": "allow",
        "bash": {
          "yarn *": "allow",
          "git status": "allow",
          "git diff*": "allow",
          "git log*": "allow",
          "*": "ask"
        }
      }
    },
    // ─────────────────────────────────────────────────────────────────────────
    // SUBAGENTS (Invoked by primary agents or via @mention)
    // ─────────────────────────────────────────────────────────────────────────
    // GENERAL - Research and multi-step tasks
    "general": {
      "description": "General-purpose research and multi-step exploration",
      "mode": "subagent",
      "model": "anthropic/opus-deep",
      "temperature": 0.2,
      "maxSteps": 100,
      "tools": {
        "read": true,
        "write": true,
        "edit": true,
        "bash": true,
        "grep": true,
        "glob": true,
        "list": true,
        "webfetch": true,
        "todowrite": true,
        "todoread": true,
        "ask_user": true
      }
    },
    // EXPLORE - Fast codebase exploration (Sonnet for speed)
    "explore": {
      "description": "Fast codebase exploration and file search",
      "mode": "subagent",
      "model": "anthropic/sonnet",
      "temperature": 0.1,
      "maxSteps": 20,
      "tools": {
        "read": true,
        "write": false,
        "edit": false,
        "bash": false,
        "grep": true,
        "glob": true,
        "list": true
      }
    }
  },
  // ============================================================================
  // MCP SERVERS (Model Context Protocol)
  // ============================================================================
  "mcp": {
    // Context7 - Documentation search for libraries and frameworks
    "context7": {
      "type": "remote",
      "url": "https://mcp.context7.com/mcp",
      "enabled": true
    },
    "playwright": {
      "type": "local",
      "command": [
        "npx",
        "@playwright/mcp@latest",
        "--browser",
        "chromium"
      ]
    },
    "eslint": {
      "type": "local",
      "command": [
        "npx",
        "@eslint/mcp@latest"
      ]
    }
  },
  // ============================================================================
  // DISABLED PROVIDERS
  // ============================================================================
  "disabled_providers": []
}